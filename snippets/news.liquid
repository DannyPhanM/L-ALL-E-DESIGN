{% if news_settings.news_style != 'disable' %}
{{ 'news.css' | asset_url | stylesheet_tag }}

{% style %}
#shopify-section-{{ section.id }} {
    --news-horizontal-alignment: {{ news_settings.news_horizontal_alignment }};
}
.news-container .news__icon {
    height: {{ 24 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 24 }}px;
}
.custom-type-preset .news-container .news__icon {
    height: max(24px, calc(var(--body-s-font-size) * var(--body-s-line-height)));
}
.custom-type-preset.navigations-body-l .news-container .news__icon {
    height: max(24px, calc(var(--body-l-font-size) * var(--body-l-line-height)));
}
.custom-type-preset.navigations-body-m .news-container .news__icon {
    height: max(24px, calc(var(--body-m-font-size) * var(--body-m-line-height)));
}
.custom-type-preset.navigations-label .news-container .news__icon {
    height: max(24px, calc(var(--label-font-size) * var(--label-line-height)));
}
@media screen and (max-width: 920px) {
    .news-container .news__icon {
        height: {{ 24 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 24 }}px;
    }
}
{% endstyle %}


{%- liquid 
	if settings.typography_preset == 'avant_garde'
			assign weight = settings.accent_icon_weight
			if settings.swap_fonts
					assign weight = settings.base_icon_weight
			endif
	else 
			assign weight =  settings.base_icon_weight
			if settings.swap_fonts
					assign weight = settings.accent_icon_weight
			endif
	endif

    assign uppercase_font = false
    assign bolder_font = false
    if settings.typography_preset == 'custom'
        assign weight = settings.custom_icon_weight
        if settings.uppercase_body_s and settings.navigation_item_size == 'default'
            assign uppercase_font = true
        endif
        if settings.bolder_font_body_s and settings.navigation_item_size == 'default'
            assign bolder_font = true
        endif
    endif
-%}

<div class="news-block news-block--{{ section.id }}" {{ block_item.shopify_attributes }}>
    <div class="news-container news-container--{{ account_settings.news_style }} news-container--{{ settings.typography_preset }} {% if settings.navigation_item_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.navigation_item_size }}{% else %}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}{% endif %}">
        <button class="news news-drawer-opener news--{{ news_settings.news_style }} {% if settings.allow_transparent_navigation and settings.navigation_layout == 'sidebar_based' %}{% if settings.allow_transparent_navigation and settings.navigation_layout == 'sidebar_based' and section.id contains 'sidebar' and section.settings.color_type == 'default' %}scroll-color{% endif %}{% endif %} hover-opacity {% if section.settings.color_type == 'custom' %}color-custom{% elsif section.settings.color_type == 'invert' %}color-invert{% endif %}" role="button">
            {%- if news_settings.news_style == 'text' -%}
                <span class="news__title news-container--{{ settings.typography_preset }} {% if settings.navigation_item_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.navigation_item_size }}{% else %}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}{% endif %}">{{ news_settings.news_heading }}</span>
            {%- elsif news_settings.news_style == 'icon' -%}
            <span class="account__icon">
                {% if weight == 'regular' %}
                    {% if news_settings.news_icon == 'bell' %}
                        {% render 'icon-accordion-2', icon: 'bell-regular' %}
                    {% else %}
                        {% render 'icon-accordion-2', icon: 'fire-regular' %}
                    {% endif %}
                {% elsif weight == 'medium' %}
                    {% if news_settings.news_icon == 'bell' %}
                        {% render 'icon-accordion-2', icon: 'bell-medium' %}
                    {% else %}
                        {% render 'icon-accordion-2', icon: 'fire-medium' %}
                    {% endif %}
                {% elsif weight == 'bold' %}
                    {% if news_settings.news_icon == 'bell' %}
                        {% render 'icon-accordion-2', icon: 'bell-bold' %}
                    {% else %}
                        {% render 'icon-accordion-2', icon: 'fire-bold' %}
                    {% endif %}
                {% endif %}
            </span>
            {%- endif -%}
            <span class="news-indicator" aria-hidden="true"></span>
        </button>
    </div>
</div>
{% endif %}