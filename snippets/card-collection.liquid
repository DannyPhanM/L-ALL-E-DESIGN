{% liquid
  assign settings_page_width = settings.max_page_width | append: 'px'
  if settings.max_page_width == 'full_width'
  assign settings_page_width = '100vw'
  endif
  assign uppercase_title = false
  assign bolder_title_font = false
  if settings.typography_preset == 'custom' and settings.collection_title_size == 'default'
    if collection_list
      if settings.uppercase_heading_xs
        assign uppercase_title = true
      endif
      if settings.bolder_font_heading_xs
        assign bolder_title_font = true
      endif
    else
      if settings.uppercase_body_s
        assign uppercase_title = true
      endif
      if settings.bolder_font_body_s
        assign bolder_title_font = true
      endif
    endif
  endif
%}
<a class="card-collection" href="{{ card_collection.url }}">
  {%- if card_collection.featured_image -%}
    <div class="card__media">
      <div class="lazy-image-container ratio-{{ image_ratio }}" {% if settings.disable_right_click %}oncontextmenu="return false"{% endif %}>
      {% if settings.images_loading != 'disable' %}
        <figure class="lazy-image lazy-image--{{ settings.images_loading }}" style="--desktop-asp-rat: {{ card_collection.featured_image.aspect_ratio }}">
      {% endif %}
        <img srcset="{%- if card_collection.featured_image.width >= 165 -%}{{ card_collection.featured_image | image_url: width: 165 }} 165w,{%- endif -%}
          {%- if card_collection.featured_image.width >= 375 -%}{{ card_collection.featured_image | image_url: width: 375 }} 375w,{%- endif -%}
          {%- if card_collection.featured_image.width >= 550 -%}{{ card_collection.featured_image | image_url: width: 550 }} 550w,{%- endif -%}
          {%- if card_collection.featured_image.width >= 750 -%}{{ card_collection.featured_image | image_url: width: 750 }} 750w,{%- endif -%}
          {%- if card_collection.featured_image.width >= 1100 -%}{{ card_collection.featured_image | image_url: width: 1100 }} 1100w,{%- endif -%}
          {%- if card_collection.featured_image.width >= 1500 -%}{{ card_collection.featured_image | image_url: width: 1500 }} 1500w,{%- endif -%}
          {{ card_collection.featured_image | image_url }} {{ card_collection.featured_image.width }}w" src="{{ card_collection.featured_image | image_url: width: 1700 }}"
          {% if section.settings.grid_type == 'two_columns' %}
          sizes="
          (min-width: {{ settings_page_width }}) calc(({{ settings_page_width }} - 200px) / 2),
          (min-width: 750px) calc((100vw - 2rem) / 2),
          calc((100vw - 3rem)/2)"
          {% elsif section.settings.grid_type == 'alternative_1' %}
          sizes="
          (min-width: {{ settings_page_width }}) calc(({{ settings_page_width }} - 200px) * 0.7),
          (min-width: 750px) calc((100vw - 2rem) * 0.7),
          calc((100vw - 3rem) * 0.7)"
          {% elsif section.settings.grid_type == 'alternative_2' %}
          sizes="
          (min-width: {{ settings_page_width }}) calc({{ settings_page_width }} - 200px),
          (min-width: 750px) calc(100vw - 2rem),
          calc(100vw - 3rem)"
          {% endif %}
          {% if settings.images_loading != 'disable' %}
            onload="this.parentNode.classList.add('lazyloaded');"
          {% endif %}
          alt="{{ card_collection.title | escape }}" 
          draggable="false" 
          loading="lazy" 
          width="{{ card_collection.featured_image.width }}" 
          height="{{ card_collection.featured_image.height }}" 
          class="card__image"
        >
        {% if settings.images_loading != 'disable' %}
          {% if settings.images_loading != 'fade_scale' %}
          <div class="lazy-image__preloader lazy-image__preloader--full lazy-image__preloader-{{ settings.images_loading }}" aria-hidden="true">
            <img 
            alt="{{ card_collection.featured_image.alt | escape }}" 
            src="{{ card_collection.featured_image | image_url: width: 10 }}"
            draggable="false"
            width="10" 
            height="10">
          </div>
          {% endif %}
      </figure>
      {% endif %}
      </div>
    </div>
  {%- else -%}
    <div class="card__media-placeholder">
      <div class="card__image ratio-{{ section.settings.image_ratio }}">
        {{ 'collection-3' | placeholder_svg_tag: 'placeholder-svg' }}
      </div>
    </div>
  {%- endif -%}
  <h2 class="card__title card__title--{{ settings.typography_preset }} {% if settings.typography_preset == 'custom' %}{% if settings.collection_title_size != 'default' %}{{ settings.collection_title_size }}{% else %}{% if uppercase_title %} uppercase{% endif %}{% if bolder_title_font %} bolder-font{% endif %}{% endif %}{% endif %} {% if settings.center_text %} center{% endif %}">{{ card_collection.title | escape }}
    {%- if section.settings.show_number == true -%}<span class="heading__details">({{ card_collection.all_products_count }})</span>
    {%- endif -%}
  </h2>
</a>