{{ 'cart-items.css' | asset_url | stylesheet_tag }}
{{ 'component-cart-drawer.css' | asset_url | stylesheet_tag }}
{{ 'component-loading.css' | asset_url | stylesheet_tag }}
{% if settings.enable_order_note or settings.enable_shipping_calculator %}
    {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
{% endif %}

{%- if  settings.enable_cart_drawer -%}
<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{% style %}
    .icon-accordion {
        width: auto;
        height: {{ 24 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
    }
    .heading_m + .icon-accordion,
	.heading_m_uppercase + .icon-accordion {
        height: {{ 64 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;	
	}
    .heading_s + .icon-accordion,
	.heading_s_uppercase + .icon-accordion {
		height: {{ 46 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;
	}
    .heading_xs + .icon-accordion,
	.heading_xs_uppercase + .icon-accordion {
		height: {{ 36 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;
	}
    .body_l + .icon-accordion,
	.body_l_uppercase + .icon-accordion {
        height: {{ 28 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
	}
    .body_m + .icon-accordion,
	.body_m_uppercase + .icon-accordion {
        height: {{ 26 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
	}
    .label_font + .icon-accordion,
	.label_font_uppercase + .icon-accordion {
        height: {{ 16 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
	}
    .custom-type-preset .icon-accordion {
      height: max(16px, calc(var(--body-s-font-size) * var(--body-s-line-height)));
    }
    .custom-type-preset .heading_m + .icon-accordion,
    .custom-type-preset .heading_m_uppercase + .icon-accordion {
      height: max(16px, calc(var(--heading-m-font-size) * var(--heading-m-line-height)));	
    }
    .custom-type-preset .heading_s + .icon-accordion,
    .custom-type-preset .heading_s_uppercase + .icon-accordion {
      height: max(16px, calc(var(--heading-s-font-size) * var(--heading-s-line-height)));	
    }
    .custom-type-preset .heading_xs + .icon-accordion,
    .custom-type-preset .heading_xs_uppercase + .icon-accordion {
      height: max(16px, calc(var(--heading-xs-font-size) * var(--heading-xs-line-height)));	
    }
    .custom-type-preset .body_l + .icon-accordion,
    .custom-type-preset .body_l_uppercase + .icon-accordion {
        height: max(16px, calc(var(--body-l-font-size) * var(--body-l-line-height)));
    }
    .custom-type-preset .body_m + .icon-accordion,
    .custom-type-preset .body_m_uppercase + .icon-accordion {
        height: max(16px, calc(var(--body-m-font-size) * var(--body-m-line-height)));
    }
    .custom-type-preset .label_font + .icon-accordion,
    .custom-type-preset .label_font_uppercase + .icon-accordion {
        height: max(16px, calc(var(--label-font-size) * var(--label-line-height)));
    }
    .card__vendor--minimal_uppercase .discounts__discount svg,
    .card__vendor--minimal_basic .discounts__discount svg,
    .card__vendor--classic .discounts__discount svg,
    .card__vendor--contrast .discounts__discount svg,
    .body-secondary-text--contrast .discounts__discount svg {
      height: {{ 16 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
      width: {{ 16 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
    }
    .card__vendor--minimal_heavy .discounts__discount svg,
    .card__vendor--brutalist .discounts__discount svg,
    .body-secondary-text--minimal_heavy .discounts__discount svg,
    .body-secondary-text--brutalist .discounts__discount svg {
      height: {{ 28 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
      width: {{ 28 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
    }
    .card__vendor--avant_garde .discounts__discount svg,
    .card__vendor--duet .discounts__discount svg,
    .body-secondary-text--duet .discounts__discount svg {
      height: {{ 26 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
      width: {{ 26 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
    }
    .body-secondary-text--minimal_uppercase .discounts__discount svg,
    .body-secondary-text--minimal_basic .discounts__discount svg,
    .body-secondary-text--classic .discounts__discount svg,
    .body-secondary-text--avant_garde .discounts__discount svg {
      height: {{ 24 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
      width: {{ 24 | times: settings.desktop_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
    }
    .body-secondary-text--custom .discounts__discount svg,
    .card__vendor--custom .discounts__discount svg  {
      height: max(16px, calc(var(--body-s-font-size) * var(--body-s-line-height)));
      width: max(16px, calc(var(--body-s-font-size) * var(--body-s-line-height)));
    }
    .card__vendor--custom.heading_s .discounts__discount svg,
    .card__vendor--custom.heading_s_uppercase .discounts__discount svg {
      height: max(16px, calc(var(--heading-s-font-size) * var(--heading-s-line-height)));
      width: max(16px, calc(var(--heading-s-font-size) * var(--heading-s-line-height)));
    }
    .card__vendor--custom.heading_xs .discounts__discount svg,
    .card__vendor--custom.heading_xs_uppercase .discounts__discount svg {
      height: max(16px, calc(var(--heading-xs-font-size) * var(--heading-xs-line-height)));
      width: max(16px, calc(var(--heading-xs-font-size) * var(--heading-xs-line-height)));
    }
    .card__vendor--custom.body_l .discounts__discount svg,
    .card__vendor--custom.body_l_uppercase .discounts__discount svg {
      height: max(16px, calc(var(--body-l-font-size) * var(--body-l-line-height)));
      width: max(16px, calc(var(--body-l-font-size) * var(--body-l-line-height)));
    }
    .card__vendor--custom.body_m .discounts__discount svg,
    .card__vendor--custom.body_m_uppercase .discounts__discount svg {
      height: max(16px, calc(var(--body-m-font-size) * var(--body-m-line-height)));
      width: max(16px, calc(var(--body-m-font-size) * var(--body-m-line-height)));
    }
    .card__vendor--custom.label_font .discounts__discount svg,
    .card__vendor--custom.label_font_uppercase .discounts__discount svg {
      height: max(16px, calc(var(--label-font-size) * var(--label-line-height)));
      width: max(16px, calc(var(--label-font-size) * var(--label-line-height)));
    }
    @media screen and (max-width: 920px) {
        .icon-accordion {
            width: auto;
            height: {{ 24 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .heading_m + .icon-accordion,
        .heading_m_uppercase + .icon-accordion {
            height: {{ 64 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;	
        }
        .heading_s + .icon-accordion,
        .heading_s_uppercase + .icon-accordion {
            height: {{ 46 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;
        }
        .heading_xs + .icon-accordion,
        .heading_xs_uppercase + .icon-accordion {
            height: {{ 36 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;
        }
        .body_l + .icon-accordion,
        .body_l_uppercase + .icon-accordion {
            height: {{ 28 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .body_m + .icon-accordion,
        .body_m_uppercase + .icon-accordion {
            height: {{ 26 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .label_font + .icon-accordion,
        .label_font_uppercase + .icon-accordion {
            height: {{ 16 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .card__vendor--minimal_uppercase .discounts__discount svg,
        .card__vendor--minimal_basic .discounts__discount svg,
        .card__vendor--classic .discounts__discount svg,
        .card__vendor--contrast .discounts__discount svg,
        .body-secondary-text--contrast .discounts__discount svg {
            height: {{ 16 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
            width: {{ 16 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .card__vendor--minimal_heavy .discounts__discount svg,
        .card__vendor--brutalist .discounts__discount svg,
        .body-secondary-text--minimal_heavy .discounts__discount svg,
        .body-secondary-text--brutalist .discounts__discount svg {
            height: {{ 28 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
            width: {{ 28 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .card__vendor--avant_garde .discounts__discount svg,
        .card__vendor--duet .discounts__discount svg,
        .body-secondary-text--duet .discounts__discount svg {
            height: {{ 26 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
            width: {{ 26 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
        .body-secondary-text--minimal_uppercase .discounts__discount svg,
        .body-secondary-text--minimal_basic .discounts__discount svg,
        .body-secondary-text--classic .discounts__discount svg,
        .body-secondary-text--avant_garde .discounts__discount svg {
            height: {{ 24 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
            width: {{ 24 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 }}px;
        }
    }
    @media screen and (max-width: 768px) {
        .heading_m + .icon-accordion,
        .heading_m_uppercase + .icon-accordion {
            height: {{ 46 | times: settings.mobile_font_scale | divided_by: 100.0 | round | at_least: 16 | at_most: 128 }}px;	
        }
    }
{% endstyle %}

{{ 'component-free-shipping-bar.css' | asset_url | stylesheet_tag }}

{%- liquid 
	assign weight = settings.base_icon_weight

    if settings.typography_preset == 'avant_garde'
			assign weight_close = settings.accent_icon_weight
			if settings.swap_fonts
					assign weight_close = settings.base_icon_weight
			endif
	else 
			assign weight_close =  settings.base_icon_weight
			if settings.swap_fonts
					assign weight_close = settings.accent_icon_weight
			endif
	endif
    if settings.typography_preset == 'avant_garde' or settings.typography_preset == 'duet'
			assign weight_accordion_title = settings.accent_icon_weight
			if settings.swap_fonts
					assign weight_accordion_title = settings.base_icon_weight
			endif
	else 
			assign weight_accordion_title =  settings.base_icon_weight
			if settings.swap_fonts
					assign weight_accordion_title = settings.accent_icon_weight
			endif
	endif

    assign uppercase_font = false
    assign bolder_font = false
    assign uppercase_body_l = false
    assign bolder_body_l = false
    assign uppercase_price = false
    assign bolder_price_font = false
    assign uppercase_title = false
    assign bolder_title_font = false
    assign uppercase_text = false
    assign bolder_text_font = false
    assign uppercase_font_subtotal = false
    assign bolder_font_subtotal = false
    assign uppercase_font_label = false
    assign bolder_font_label = false
    if settings.typography_preset == 'custom'
        assign weight = settings.custom_icon_weight
        assign weight_close = settings.custom_icon_weight
        assign weight_accordion_title = settings.custom_icon_weight
        if settings.uppercase_body_s
            assign uppercase_font = true
            if settings.product_price_size == 'default'
                assign uppercase_price = true
            endif
            if settings.product_title_size == 'default'
                assign uppercase_title = true
            endif
            if settings.product_text_size == 'default'
                assign uppercase_text = true
            endif
        endif
        if settings.bolder_font_body_s
            assign bolder_font = true
            if settings.product_price_size == 'default'
                assign bolder_price_font = true
            endif
            if settings.product_title_size == 'default'
                assign bolder_title_font = true
            endif
            if settings.product_text_size == 'default'
                assign bolder_text_font = true
            endif
        endif
        if settings.uppercase_body_l
            assign uppercase_body_l = true
            if settings.cart_drawer_subtotal_size == 'default'
                assign uppercase_font_subtotal = true
            endif
        endif
        if settings.bolder_font_body_l
            assign bolder_body_l = true
            if settings.cart_drawer_subtotal_size == 'default'
                assign bolder_font_subtotal = true
            endif
        endif
        if settings.uppercase_label
            assign uppercase_font_label = true
        endif
        if settings.bolder_font_label
            assign bolder_font_label = true
        endif
    endif
-%}

<cart-drawer class="drawer {% if cart == empty %}is-empty{% endif %} {% if settings.action_after_adding == 'cart_drawer' %}open-after-adding{% endif %}">
    <div id="CartDrawer" class="cart-drawer">
        {% style %}
            .cart-drawer {
                --desktop-grid-type: 2;
            }
            @media screen and (max-width: 768px) {
                .cart-drawer  {
                    --desktop-grid-type: {{ settings.mobile_layout }};
                }
            }
        {% endstyle %}
        <div class="scroll-area hide-scrollbar">
            <div class="button-wrapper {% if settings.enable_buttons_zoom %}buttons-zoom{% endif %}">
                <button class="drawer__close button-close" type="button" onclick="this.closest('cart-drawer').close()" aria-label="{{ 'accessibility.close' | t }}">
                    {% if weight_close == 'light' %}
                            {% render 'icon', icon: 'cross-light' %}
                        {% elsif weight_close == 'regular' %}
                            {% render 'icon', icon: 'cross-regular' %}
                        {% elsif weight_close == 'medium' %}
                            {% render 'icon', icon: 'cross-medium' %}
                        {% elsif weight_close == 'bold' %}
                            {% render 'icon', icon: 'cross-bold' %}
                        {% endif %}
                </button>
            </div>
            <div class="drawer__inner" role="dialog" aria-modal="true" aria-label="{%- if settings.cart_name == 'cart' -%}{{ 'sections.cart.title_cart' | t }}{%- elsif settings.cart_name == 'basket' -%}{{ 'sections.cart.title_basket' | t }}{%- else -%}{{ 'sections.cart.title_bag' | t }}{%- endif -%}" tabindex="-1">
                <div class="drawer__inner-wrapper slider-container-js">
                    <h2 class="drawer__heading body-secondary-text--{{ settings.typography_preset }} {% if settings.total_cart_items_heading_size != 'default' %}{{ settings.total_cart_items_heading_size }}{% endif %} {% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}">{{ cart.item_count }} {% if cart.item_count == 1 %}{{ 'cart_drawer.product' | t }}{% else %}{{ 'cart_drawer.products' | t }}{% endif %}</h2>
                    {%- if cart == empty -%}
                    <h3 class="cart-page__empty-text {% if settings.center_text %}center{% endif %} cart-page__empty-text--{{ settings.typography_preset }}{% if uppercase_body_l %} uppercase{% endif %}{% if bolder_body_l %} bolder-font{% endif %} {% if settings.accent_color_for_headings %}heading--accent{% endif %}">
                        {%- if settings.cart_name == 'cart' -%}{{ 'cart.empty_cart' | t }}{%- elsif settings.cart_name == 'basket' -%}{{ 'cart.empty_basket' | t }}{%- else -%}{{ 'cart.empty_bag' | t }}{%- endif -%}
                    </h3>
                    <div class="cart-page__empty-actions {% if settings.enable_buttons_zoom %}buttons-zoom{% endif %}" >
                        {%- if shop.customer_accounts_enabled and customer == null -%}
                        <a href="{{ routes.account_login_url }}" class="button solid-button  button--{{ settings.typography_preset }} {% if settings.typography_preset == 'custom' %}{% if settings.regular_button_size == 'default' %}button-font--default{% else %}{{ settings.regular_button_size }}{% endif %}{% endif %}">{{ 'cart.login' | t }}</a>
                    {%- endif -%}
                    <a href="{{ routes.root_url }}" class="button outlined-button  button--{{ settings.typography_preset }} {% if settings.typography_preset == 'custom' %}{% if settings.regular_button_size == 'default' %}button-font--default{% else %}{{ settings.regular_button_size }}{% endif %}{% endif %}">{{ 'cart.continue_shopping' | t }}</a>
                    </div>
                    {%- else -%}

                    {% if settings.enable_free_shipping_bar_on_cart_drawer %} {% render 'free-shipping-bar', uppercase_font: uppercase_font, bolder_font: bolder_font %} {% endif %}
                
                    <cart-drawer-items {% if cart == empty %}class=" is-empty"{% endif %}>
                        <form action="{{ routes.cart_url }}" id="CartDrawer-Form" class="cart__contents cart-drawer__form" method="post">
                        <div id="CartDrawer-CartItems" class="drawer__contents js-contents">
                            <div class="drawer__cart-items-wrapper">
                                <table class="cart-items">
                                    <thead>
                                        <tr>
                                            <th class="body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %} {% if settings.dim_text %}dim{% endif %}" scope="col">{{ 'sections.cart.headings.product' | t }}</th>
                                        <th class="body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %} right {% if settings.dim_text %}dim{% endif %}" scope="col">{{ 'sections.cart.headings.total' | t }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {%- for item in cart.items -%}
                                            <tr
                                                id="CartDrawer-Item-{{ item.index | plus: 1 }}"
                                                class="cart-item{% if settings.enable_blending %} enable-blending{% endif %}{% if item.parent_relationship.parent != null %} cart-item__nested-line{% endif %}"
                                                role="row"
                                                {% if item.parent_relationship.parent != null %}
                                                aria-label="{{- 'products.product.nested_label' | t: title: item.product.title, parent_title: item.parent_relationship.parent.title | escape -}}"
                                                {% endif %}
                                            >
                                            <td class="cart-item__product">
                                                {% if item.image or settings.product_placeholder %}
                                                <span class="media-wrapper lazy-image-container ratio-{{ settings.cart_image_ratio }} {% if settings.cart_fit_product_media %}cart-item__media--fit{% endif %}" {% if settings.disable_right_click %}oncontextmenu="return false"{% endif %}>
                                                    {% if item.image %}
                                                    {% if settings.images_loading != 'disable' %}
                                                        <figure class="lazy-image lazy-image--{{ settings.images_loading }}" style="--desktop-asp-rat: {{ item.image.aspect_ratio }}">
                                                    {% endif %}
                                                    <img class="cart-item__image"
                                                        srcset="{{ item.image | image_url: width: 100 }} 1x, {{ item.image | image_url: width: 200 }} 2x"
                                                        src="{{ item.image | image_url: width: 100 }}"
                                                        alt="{{ item.image.alt | escape | split: '#' | first }}"
                                                        sizes="calc(100px * 1)"
                                                        loading="lazy"
                                                        {% if settings.images_loading != 'disable' %}
                                                            onload="this.parentNode.classList.add('lazyloaded');"
                                                        {% endif %}
                                                        draggable="false"
                                                        width="100"
                                                        height="127"/>
                                                        {% if settings.images_loading != 'disable' %}
                                                        {% if settings.images_loading != 'fade_scale' %}
                                                        <div class="lazy-image__preloader lazy-image__preloader--full lazy-image__preloader-{{ settings.images_loading }}" aria-hidden="true">
                                                            <img 
                                                            alt="{{ item.image.alt | escape }}" 
                                                            src="{{ item.image | image_url: width: 10 }}"
                                                            draggable="false"
                                                            width="10" 
                                                            height="10">
                                                        </div>
                                                        {% endif %}
                                                    </figure>
                                                    {% endif %}
                                                    {% elsif settings.product_placeholder %}
                                                    {% if settings.images_loading != 'disable' %}
                                                        <figure class="lazy-image lazy-image--{{ settings.images_loading }}" style="--desktop-asp-rat: {{ settings.product_placeholder.aspect_ratio }}">
                                                    {% endif %}
                                                    <img class="cart-item__image cart-item__image--placeholder"
                                                        srcset="{{ settings.product_placeholder | image_url: width: 100 }} 1x, {{ settings.product_placeholder | image_url: width: 200 }} 2x"
                                                        src="{{ settings.product_placeholder | image_url: width: 100 }}"
                                                        alt="{{ settings.product_placeholder.alt | escape | split: '#' | first }}"
                                                        loading="lazy"
                                                        {% if settings.images_loading != 'disable' %}
                                                            onload="this.parentNode.classList.add('lazyloaded');"
                                                        {% endif %}
                                                        draggable="false"
                                                        sizes="calc(100px * 1)"
                                                        width="100"
                                                        height="127"/>
                                                    {% if settings.images_loading != 'disable' %}
                                                        {% if settings.images_loading != 'fade_scale' %}
                                                        <div class="lazy-image__preloader lazy-image__preloader--full lazy-image__preloader-{{ settings.images_loading }}" aria-hidden="true">
                                                            <img 
                                                            alt="{{ settings.product_placeholder.alt | escape }}" 
                                                            src="{{ settings.product_placeholder | image_url: width: 10 }}"
                                                            draggable="false"
                                                            width="10" 
                                                            height="10">
                                                        </div>
                                                        {% endif %}
                                                    </figure>
                                                    {% endif %}
                                                    {% endif %}
                                                </span>
                                                {% endif %}
                                                <div class="cart-item__details">
                                                    <div class="cart-item__first-row">
                                                        <a href="{{ item.product.url }}" class="cart-item__name hover-opacity card__title--{{ settings.typography_preset }} {% if settings.product_title_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_title_size }}{% else %}{% if uppercase_title %} uppercase{% endif %}{% if bolder_title_font %} bolder-font{% endif %}{% endif %}">{{ item.product.title | escape }}</a>
                                                        <div class="cart-item__totals right">
                                                            <div class="loading-overlay__spinner hidden">
                                                                <svg class="spinner" width="24px" height="24px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                                                                <circle class="path" fill="none" stroke-width="5" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
                                                            </svg>
                                                            </div>
                                                            <div class="cart-item__price-wrapper card__title--{{ settings.typography_preset }} {% if settings.product_price_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_price_size }}{% else %}{% if uppercase_price %} uppercase{% endif %}{% if bolder_price_font %} bolder-font{% endif %}{% endif %}">
                                                                {%- if item.original_line_price != item.final_line_price -%}
                                                                <dl class="cart-item__discounted-prices cart-item__discounted-prices--column">
                                                                    <dt class="visually-hidden">{{ 'products.product.price.sale_price' | t }}</dt>
                                                                    <dd class="price price--end sale-color">
                                                                    <price-money><bdi>{{ item.final_line_price | money }}</bdi></price-money>
                                                                    </dd>
                                                                    <dt class="visually-hidden">
                                                                        {{ 'products.product.price.regular_price' | t }}
                                                                    </dt>
                                                                    <dd class="price--on-sale {% if settings.dim_text %}dim{% endif %}">
                                                                        <s class="price price-item--regular price--end">
                                                                        <price-money><bdi>{{ item.original_line_price | money }}</bdi></price-money>
                                                                        </s>
                                                                    </dd>
                                                                </dl>
                                                                {%- else -%}
                                                                <span class="price price--end">
                                                                    <price-money><bdi>{{ item.original_line_price | money }}</bdi></price-money>
                                                                </span>
                                                                {%- endif -%}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {%- if settings.cart_drawer_show_vendor -%}
                                                    <p class="cart-item__vendor card__vendor--{{ settings.typography_preset }} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">{{ item.product.vendor }}</p>
                                                    {%- endif -%}
                                                        
                                                    {%- if item.product.has_only_default_variant == false -%}
                                                        <dl>
                                                            {%- for option in item.options_with_values -%}
                                                            <div class="product-option card__vendor--{{ settings.typography_preset }} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">
                                                                <dt>{{ option.name }}: </dt>
                                                                <dd>{{ option.value }}</dd>
                                                            </div>
                                                            {%- endfor -%}
                                                        </dl>
                                                    {%- endif -%}
                                                    {%- unless item.properties == empty -%}
                                                        <dl class="data-custom-properties">
                                                            {%- for property in item.properties -%}
                                                                {%- assign property_first_char = property.first | slice: 0 -%}
                                                                {%- if property.last != blank and property_first_char != '_' -%}
                                                                <div class="product-option card__vendor--{{ settings.typography_preset }} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">
                                                                    <dt>{{ property.first }}: </dt>
                                                                    <dd>
                                                                    {%- if property.last contains '/uploads/' -%}
                                                                        <a href="{{ property.last }}" target="_blank">{{ property.last | split: '/' | last }}</a>
                                                                    {%- else -%}
                                                                        {{ property.last }}
                                                                    {%- endif -%}
                                                                    </dd>
                                                                </div>
                                                                {%- endif -%}
                                                            {%- endfor -%}
                                                        </dl>
                                                    {%- endunless -%}
                                                    {% if settings.show_pre_order_badge and item.product.template_suffix == 'preorder' %}
                                                        <div class="product-option card__vendor--{{ settings.typography_preset }} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">{{ 'products.product.pre_order' | t }}</div>
                                                    {% endif %}
                                                {%- if item.selling_plan_allocation != nil -%}
                                                    <div class="product-option card__vendor--{{ settings.typography_preset }} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">{{ item.selling_plan_allocation.selling_plan.name }}</div>
                                                {%- endif -%}
                                                <div class="cart-item__price-wrapper card__title--{{ settings.typography_preset }} {% if settings.product_price_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_price_size }}{% else %}{% if uppercase_price %} uppercase{% endif %}{% if bolder_price_font %} bolder-font{% endif %}{% endif %}">
                                                    {%- if item.original_price != item.final_price -%}
                                                        <dl class="cart-item__discounted-prices">
                                                            <dt class="visually-hidden">{{ 'products.product.price.sale_price' | t }}</dt>
                                                            <dd class="price price--end sale-color">
                                                                <price-money><bdi>{{ item.final_price | money }}</bdi></price-money>
                                                            </dd>
                                                            <dt class="visually-hidden">{{ 'products.product.price.regular_price' | t }}</dt>
                                                            <dd class="price--on-sale {% if settings.dim_text %}dim{% endif %}">
                                                                <s class="price price-item--regular price--end">
                                                                <price-money><bdi>{{ item.original_price | money }}</bdi></price-money>
                                                                </s>
                                                            </dd>
                                                        </dl>
                                                    {%- else -%}
                                                        <span class="price price--end">
                                                            <price-money><bdi>{{ item.final_price | money }}</bdi></price-money>
                                                        </span>
                                                    {%- endif -%}
                                                    {%- if item.variant.available and item.unit_price_measurement -%}
                                                    <div class="unit-price card__vendor--{{ settings.typography_preset }} dim {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}">
                                                    <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                                                    <price-money><bdi>&#40;{{ item.variant.unit_price | money }}</bdi></price-money>
                                                    <span aria-hidden="true">/</span>
                                                    <span class="visually-hidden">&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span>
                                                    {%- if item.variant.unit_price_measurement.reference_value != 1 -%}
                                                        {{- item.variant.unit_price_measurement.reference_value -}}
                                                    {%- endif -%}
                                                    {{ item.variant.unit_price_measurement.reference_unit }}&#41;
                                                    </div>
                                                {%- endif -%}
                                                </div>
                                                <ul class="discounts card__vendor--{{ settings.typography_preset }} {% if settings.dim_text %}dim{% endif %} {% if settings.product_text_size != 'default' and settings.typography_preset == 'custom' %}{{ settings.product_text_size }}{% else %}{% if uppercase_text %} uppercase{% endif %}{% if bolder_text_font %} bolder-font{% endif %}{% endif %} {% if settings.dim_text %}dim{% endif %}" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                                                    {%- for discount in item.line_level_discount_allocations -%}
                                                    <li class="discounts__discount">
                                                        {% if weight_close == 'regular' %}
                                                        {% render 'icon-accordion-2', icon: 'price-tag-alternative-regular' %}
                                                        {% elsif weight_close == 'medium' %}
                                                                {% render 'icon-accordion-2', icon: 'price-tag-alternative-medium' %}
                                                        {% elsif weight_close == 'bold' %}
                                                                {% render 'icon-accordion-2', icon: 'price-tag-alternative-bold' %}
                                                        {% endif %}
                                                        {{ discount.discount_application.title }}
                                                    </li>
                                                    {%- endfor -%}
                                                </ul>
                                            <div class="cart-item__details-actions">
                                                <label class="visually-hidden" for="Drawer-quantity-{{ item.index | plus: 1 }}">{{ 'products.product.quantity.label' | t }}</label>
                                                <quantity-input class="quantity">
                                                    <button class="quantity__button no-js-hidden" name="minus" type="button" {% if item.quantity == 0 %}disabled{% endif %} {% if item.instructions and item.instructions.can_update_quantity == false %}disabled{% endif %}>
                                                    <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: item.product.title | escape }}</span>
                                                    {% if weight == 'light' %}
                                                                {% render 'icon', icon: 'minus-light' %}
                                                        {% elsif weight == 'regular' %}
                                                                {% render 'icon', icon: 'minus-regular' %}
                                                        {% elsif weight == 'medium' %}
                                                                {% render 'icon', icon: 'minus-medium' %}
                                                        {% elsif weight == 'bold' %}
                                                                {% render 'icon', icon: 'minus-bold' %}
                                                        {% endif %}
                                                    </button>
                                                    <input class="quantity__input label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}"
                                                    type="number"
                                                    dir="ltr"
                                                    name="updates[]"
                                                    value="{{ item.quantity }}"
                                                    min="0"
                                                    {% if item.variant.quantity_rule.max != null %}
                                                        max="{{ item.variant.quantity_rule.max }}"
                                                    {% endif %}
                                                    step="{{ item.variant.quantity_rule.increment }}"
                                                    aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                                                    id="Drawer-quantity-{{ item.index | plus: 1 }}"
                                                    data-index="{{ item.index | plus: 1 }}"
                                                    onclick="this.select();"/>
                                                    <button class="quantity__button no-js-hidden" name="plus" type="button" {% if item.instructions and item.instructions.can_update_quantity == false %}disabled{% endif %}>
                                                    <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: item.product.title | escape }}</span>
                                                    {% if weight == 'light' %}
                                                            {% render 'icon', icon: 'plus-light' %}
                                                    {% elsif weight == 'regular' %}
                                                            {% render 'icon', icon: 'plus-regular' %}
                                                    {% elsif weight == 'medium' %}
                                                            {% render 'icon', icon: 'plus-medium' %}
                                                    {% elsif weight == 'bold' %}
                                                            {% render 'icon', icon: 'plus-bold' %}
                                                    {% endif %}
                                                    </button>
                                                </quantity-input>
                                                <cart-remove-button class="remove-button hover-opacity {% if settings.dim_text %}dim{% endif %}{% if item.instructions and item.instructions.can_remove == false %} hidden{% endif %}" id="CartDrawer-Remove-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}">
                                                    <a href="{{ item.url_to_remove }}" class="button button--tertiary" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                                        {% if weight == 'regular' %}
                                                                {% render 'icon-accordion-2', icon: 'remove-regular' %}
                                                        {% elsif weight == 'medium' %}
                                                                {% render 'icon-accordion-2', icon: 'remove-medium' %}
                                                        {% elsif weight == 'bold' %}
                                                                {% render 'icon-accordion-2', icon: 'remove-bold' %}
                                                        {% endif %}
                                                    </a>
                                                </cart-remove-button>
                                            </div>
                                            <p class="cart-item__error form__message errors" id="CartDrawer-LineItemError-{{ item.index | plus: 1 }}">
                                            <span class="cart-item__error-text label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}"></span>
                                        </p>
                                        </div>
                                        </td>                  
                                    </tr>
                                    {%- endfor -%}
                                </tbody>
                                </table>
                            </div>
                            <p id="CartDrawer-LiveRegionText" class="visually-hidden" role="status"></p>
                            <p id="CartDrawer-LineItemStatus" class="visually-hidden" aria-hidden="true" role="status">{{ 'accessibility.loading' | t }}</p>
                        </div>
                        <div id="CartDrawer-CartErrors" role="alert" class="label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}"></div>
                        </form>
                    </cart-drawer-items>

                    {% if settings.enable_discount_code %}
                        {% render 'cart-discount', object_settings: settings, section_id: section.id %}
                    {% endif %}

                    {% if settings.enable_order_note %}
                    {% liquid 
                        assign uppercase_title_block = false
                        assign bolder_font_block = false
                        if settings.typography_preset == 'custom' and settings.order_heading_size == 'default'
                            if settings.uppercase_body_s 
                                assign uppercase_title_block = true
                            endif
                            if settings.bolder_font_body_s 
                                assign bolder_font_block = true
                            endif
                        endif
                        assign heading_text = settings.order_heading
                        assign final_text = ''
                        assign split_text_curly = heading_text | split: '{'
                        for part in split_text_curly
                            if part contains '}'
                                assign split_curly = part | split: '}'
                                assign styled_text = split_curly[0]
                                assign after_curly = split_curly[1]
                                assign final_text = final_text | append: '<span class="styled">' | append: styled_text | append: '</span>' | append: after_curly
                            else
                                assign final_text = final_text | append: part
                            endif
                        endfor
                    %}
                    <accordion-block class="accordion-first accordion-block">
                        <div class="product__accordion accordion no-js-hidden">
                            <div class="accordion-toggle {% unless settings.show_collapsible_order %}not_collapsible is-open{% endunless %}" {% unless settings.show_collapsible_order %}open{% endunless %}>
                            <div class="accordion__summary"  tabindex="0">
                                <div class="summary__title">
                                    <div class="summary__title-name {% if settings.order_heading_size != 'default' %}{{ settings.order_heading_size }}{% else %}{% if uppercase_title_block %} uppercase{% endif %}{% if bolder_font_block %} bolder-font{% endif %}{% endif %}">
                                        <h2 class="h4 accordion__title custom-heading accordion__title--{{ settings.typography_preset }} {% if settings.order_heading_size != 'default' %}{{ settings.order_heading_size }}{% else %}{% if uppercase_title_block %} uppercase{% endif %}{% if bolder_font_block %} bolder-font{% endif %}{% endif %}">{{ final_text }}</h2>
                                    </div>
                                    <span class="icon-accordion">
                                        <span class="icon-accordion__close">
                                            {% if weight_accordion_title == 'light' %}
                                                    {% render 'icon', icon: 'plus-light' %}
                                            {% elsif weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'plus-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'plus-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'plus-bold' %}
                                            {% endif %}
                                        </span>
                                        <span class="icon-accordion__open">
                                            {% if weight_accordion_title == 'light' %}
                                                    {% render 'icon', icon: 'minus-light' %}
                                            {% elsif weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'minus-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'minus-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'minus-bold' %}
                                            {% endif %}
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="accordion__panel">
                                <div class="accordion__content">
                                    <cart-note class="cart__note">
                                      <label class="secondary-text {% if settings.dim_text %}dim{% endif %} label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" for="CartDrawer-Note">{{ settings.order_label }}</label>
                                      <textarea class="text-area input--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" name="note" id="CartDrawer-Note" placeholder="{{ settings.order_placeholder | strip_html }}">{{ cart.note }}</textarea>
                                  </cart-note>
                                </div>
                            </div>
                            </div>
                        </div>
                    </accordion-block>
                    {% endif %}

                    {% if settings.enable_shipping_calculator %}
                    {% liquid 
                        assign uppercase_title_block = false
                        assign bolder_font_block = false
                        if settings.typography_preset == 'custom' and settings.shipping_heading_size == 'default'
                            if settings.uppercase_body_s 
                                assign uppercase_title_block = true
                            endif
                            if settings.bolder_font_body_s 
                                assign bolder_font_block = true
                            endif
                        endif
                        assign heading_text = settings.shipping_heading
                        assign final_text = ''
                        assign split_text_curly = heading_text | split: '{'
                        for part in split_text_curly
                            if part contains '}'
                                assign split_curly = part | split: '}'
                                assign styled_text = split_curly[0]
                                assign after_curly = split_curly[1]
                                assign final_text = final_text | append: '<span class="styled">' | append: styled_text | append: '</span>' | append: after_curly
                            else
                                assign final_text = final_text | append: part
                            endif
                        endfor
                    %}
                    <accordion-block class="accordion-second accordion-block">
                        <div class="product__accordion accordion no-js-hidden" >
                            <div class="accordion-toggle">
                            <div class="accordion__summary" tabindex="0">
                                <div class="summary__title">
                                    <div class="summary__title-name {% if settings.shipping_heading_size != 'default' %}{{ settings.shipping_heading_size }}{% else %}{% if uppercase_title_block %} uppercase{% endif %}{% if bolder_font_block %} bolder-font{% endif %}{% endif %}">
                                      <h2 class="h4 accordion__title custom-heading accordion__title--{{ settings.typography_preset }} {% if settings.shipping_heading_size != 'default' %}{{ settings.shipping_heading_size }}{% else %}{% if uppercase_title_block %} uppercase{% endif %}{% if bolder_font_block %} bolder-font{% endif %}{% endif %}">{{ final_text }}</h2>
                                  </div>
                                    <span class="icon-accordion">
                                        <span class="icon-accordion__close">
                                            {% if weight_accordion_title == 'light' %}
                                                    {% render 'icon', icon: 'plus-light' %}
                                            {% elsif weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'plus-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'plus-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'plus-bold' %}
                                            {% endif %}
                                        </span>
                                        <span class="icon-accordion__open">
                                            {% if weight_accordion_title == 'light' %}
                                                    {% render 'icon', icon: 'minus-light' %}
                                            {% elsif weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'minus-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'minus-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'minus-bold' %}
                                            {% endif %}
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="accordion__panel">
                                <div class="accordion__content">                
                                <shipping-calculator>                    
                                    <form-state>
                                    <div class="select">
                                        <label class="secondary-text {% if settings.dim_text %}dim{% endif %} label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" for="ShippingCalculatorCountry">{{ 'sections.cart.shipping_country' | t | append: '*' }}</label>
                                        <div class="select">
                                        <select
                                            id="ShippingCalculatorCountry"
                                            class="input--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}"
                                            data-default="{% if shop.customer_accounts_enabled and customer %}{{ customer.default_address.country }}{% elsif settings.shipping_default_country != '' %}{{ settings.shipping_default_country }}{% endif %}"
                                            autocomplete="country"
                                            data-empty="---"
                                            required>
                                            {{ country_option_tags }}
                                        </select>
                                        <div class="select-icon">
                                            {% if weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'close-chevron-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'close-chevron-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'close-chevron-bold' %}
                                            {% endif %}
                                        </div>
                                        </div>
                                    </div>
                                    <div class="select" id="ShippingCalculatorProvinceContainer" style="display: none">
                                        <label class="secondary-text {% if settings.dim_text %}dim{% endif %} label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" for="ShippingCalculatorProvince">{{ 'sections.cart.shipping_state' | t }}</label>
                                        <div class="select">
                                        <select
                                            id="ShippingCalculatorProvince"
                                            class="input--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}"
                                            data-default="{% if shop.customer_accounts_enabled and customer and customer.default_address.province != '' %}{{ customer.default_address.province }}{% endif %}"
                                            autocomplete="address-level1">
                                        </select>
                                        <div class="select-icon">
                                            {% if weight_accordion_title == 'regular' %}
                                                    {% render 'icon', icon: 'close-chevron-regular' %}
                                            {% elsif weight_accordion_title == 'medium' %}
                                                    {% render 'icon', icon: 'close-chevron-medium' %}
                                            {% elsif weight_accordion_title == 'bold' %}
                                                    {% render 'icon', icon: 'close-chevron-bold' %}
                                            {% endif %}
                                        </div>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label class="secondary-text {% if settings.dim_text %}dim{% endif %} label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" for="ShippingCalculatorZip">{{ 'sections.cart.zip' | t }}</label>
                                        <input id="ShippingCalculatorZip" class="input input--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" type="text"{% if shop.customer_accounts_enabled and customer %} value="{{ customer.default_address.zip }}"{% endif %} autocapitalize="characters" autocomplete="postal-code" placeholder="{{ 'sections.cart.zip_placeholder' | t }}"/>
                                    </div>
                                    <div class="field form__message errors hidden error-color label--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" id="ShippingCalculatorErrors">
                                        <div class="errors"></div>
                                    </div>
                                    <div class="shipping-button {% if settings.enable_buttons_zoom %}buttons-zoom{% endif %}">
                                        <button class="button solid-button button--{{ settings.typography_preset }} button--submit {% if settings.typography_preset == 'custom' %}{% if settings.regular_button_size == 'default' %}button-font--default{% else %}{{ settings.regular_button_size }}{% endif %}{% endif %}" type="button">{{ 'sections.cart.estimate' | t }}</button>
                                    </div>
                                    </form-state>
                                    <div class="field form__message hidden body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" id="ShippingCalculatorSuccess"></div>
                                </shipping-calculator>
                                </div>
                            </div>
                            </div>
                        </div>
                    </accordion-block>
                    {% endif %}
                    {% if settings.enable_cart_recommendations %}
                    {%- render 'cart-recommendations', cart_recommendations_settings: settings, desktop_grid: 2, is_compact: true -%}
                    {% endif %}
                    {% endif %}
                </div>
                {%- if cart != empty -%}
                <div class="drawer__footer">
                    <div class="js-contents">
                        <div class="block-prices">
                            {%- assign your_saved = 0 -%}
                            {%- for item in cart.items -%}
                            {%- if item.original_price != item.final_price -%}
                            {% liquid
                            assign your_saved = item.original_price | minus: item.final_price | times: item.quantity | plus: your_saved 
                            %}
                            {%- endif -%}
                            {%- endfor -%}
                            {%- if cart.cart_level_discount_applications.size > 0 -%}
                                {%- for discount in cart.cart_level_discount_applications -%}
                                {% liquid
                                    assign your_saved = discount.total_allocated_amount | plus: your_saved 
                                %}
                                {%- endfor -%}
                            {%- endif -%}
                            {%- if settings.show_cart_total -%}
                            <div class="cart-totals body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}">
                                <p class="cart-totals__title">
                                    {%- if settings.cart_name == 'cart' -%}{{ 'sections.cart.cart_total' | t }}{%- elsif settings.cart_name == 'basket' -%}{{ 'sections.cart.basket_total' | t }}{%- else -%}{{ 'sections.cart.bag_total' | t }}{%- endif -%}
                                </p>
                                {%- assign cart_total = cart.original_total_price -%}
                                <p class="cart-totals__value">{% if settings.currency_code_enabled %}{{ cart_total | money_with_currency }}{% else %}{{ cart_total | money }}{% endif %}</p>
                            </div>
                            {% endif %}
                            {%- if cart.cart_level_discount_applications.size > 0 -%}
                                <div class="discounts-wrapper body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %} {% if settings.dim_text %}dim{% endif %}">
                                <ul class="discounts" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                                    {%- for discount in cart.cart_level_discount_applications -%}
                                    <li class="discounts__discount discounts__discount--position">
                                        {% if weight_close == 'regular' %}
                                        {% render 'icon-accordion-2', icon: 'price-tag-alternative-regular' %}
                                        {% elsif weight_close == 'medium' %}
                                                {% render 'icon-accordion-2', icon: 'price-tag-alternative-medium' %}
                                        {% elsif weight_close == 'bold' %}
                                                {% render 'icon-accordion-2', icon: 'price-tag-alternative-bold' %}
                                        {% endif %}
                                        {{ discount.title }}
                                        {% if settings.currency_code_enabled %}(-{{ discount.total_allocated_amount | money_with_currency }}){% else %}(-{{ discount.total_allocated_amount | money }}){% endif %}
                                    </li>
                                    {%- endfor -%}
                                </ul>
                                </div>
                            {%- endif -%}
                            {%- if settings.show_saved and your_saved > 0 -%}
                            <div class="discount body-secondary-text--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %}" aria-label="{{ 'customer.order.discount' | t }}">
                                <p class="discount__title">{{ 'sections.cart.saved' | t }}</p>
                                <p class="discount__value sale-color">{% if settings.currency_code_enabled %}{{ your_saved | money_with_currency }}{% else %}{{ your_saved | money }}{% endif %}</p>
                            </div>
                            {% endif %}
                            <div class="totals total--{{ settings.typography_preset }} {% if settings.cart_drawer_subtotal_size != 'default' %}{{ settings.cart_drawer_subtotal_size }}{% else %}{% if uppercase_font_subtotal %} uppercase{% endif %}{% if bolder_font_subtotal %} bolder-font{% endif %}{% endif %}">
                            <p class="totals__subtotal">{{ 'sections.cart.subtotal' | t }}</p>
                            <p class="totals__subtotal-value">{% if settings.currency_code_enabled %}{{ cart.total_price | money_with_currency }}{% else %}{{ cart.total_price | money }}{% endif %}</p>
                            </div>
                        </div>
                        <small class="tax-note product__shipping-policy--{{ settings.typography_preset }}{% if uppercase_font_label %} uppercase{% endif %}{% if bolder_font_label %} bolder-font{% endif %} {% if settings.dim_text %}dim{% endif %}">
                        {%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
                            {{ 'sections.cart.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
                        {%- elsif cart.taxes_included -%}
                            {{ 'sections.cart.taxes_included_but_shipping_at_checkout' | t }}
                        {%- elsif shop.shipping_policy.body != blank -%}
                            {{ 'sections.cart.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
                        {%- else -%}
                            {{ 'sections.cart.taxes_and_shipping_at_checkout' | t }}
                        {%- endif -%}
                        </small>
                    </div>
                    {%- if settings.enable_checkbox and settings.checkbox_label != blank -%}
                        <label class="field field--checkbox" for="checkbox--cart" form="CartDrawer-Form">
                            <input form="CartDrawer-Form" type="checkbox" id="checkbox--cart" name="enable-checkout" {%  if settings.make_required %}required{% endif %}>
                            <span class="label label-checkbox--{{ settings.typography_preset }}{% if uppercase_font %} uppercase{% endif %}{% if bolder_font %} bolder-font{% endif %} richtext {% if settings.enable_animated_underline %}richtext-link--underline{% endif %}">{{ settings.checkbox_label }}</span>
                        </label>
                    {%- endif -%}
                    <div class="drawer__footer-actions {% if settings.enable_buttons_zoom %}buttons-zoom{% endif %}">
                        <div class="cart__checkout">
                            <button type="submit" id="CartDrawer-Checkout" class="cart__checkout-button button solid-button button--{{ settings.typography_preset }} {% if settings.typography_preset == 'custom' %}{% if settings.regular_button_size == 'default' %}button-font--default{% else %}{{ settings.regular_button_size }}{% endif %}{% endif %}" name="checkout"{% if cart == empty %} disabled{% endif %} form="CartDrawer-Form">
                                {{ 'sections.cart.checkout' | t }}
                            </button>
                        </div>
                        {%- unless settings.hide_cart_button -%}
                        <a href="{{ routes.cart_url }}" class="button outlined-button  button--{{ settings.typography_preset }} {% if settings.typography_preset == 'custom' %}{% if settings.regular_button_size == 'default' %}button-font--default{% else %}{{ settings.regular_button_size }}{% endif %}{% endif %}">
                            {% if settings.cart_name == 'cart' %}{{ 'cart_drawer.view_cart' | t }}{% elsif settings.cart_name == 'bag' %}{{ 'cart_drawer.view_bag' | t }}{% else %}{{ 'cart_drawer.view_basket' | t }}{% endif %}
                        </a>
                        {% endunless %}
                    </div>
                </div>
                {%- endif -%}
            </div>
        </div>
    </div>
</cart-drawer>

<script>
	document.addEventListener('DOMContentLoaded', function() {
	  function isIE() {
		const ua = window.navigator.userAgent;
		const msie = ua.indexOf('MSIE ');
		const trident = ua.indexOf('Trident/');
  
		return (msie > 0 || trident > 0);
	  }
  
	  if (!isIE()) return;
	  const cartSubmitInput = document.createElement('input');
	  cartSubmitInput.setAttribute('name', 'checkout');
	  cartSubmitInput.setAttribute('type', 'hidden');
	  document.querySelector('#cart').appendChild(cartSubmitInput);
	  document.querySelector('#checkout').addEventListener('click', function(event) {
		document.querySelector('#cart').submit();
	  });
	});
  </script>